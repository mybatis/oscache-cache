<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<!--
    Copyright 2010 The myBatis Team

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<!--
    version: $Id$
-->
<book>

    <bookinfo>
        <title>MyBatis OScache integration - Reference Documentation</title>

        <authorgroup>
            <author>
                <firstname>The MyBatis Community</firstname>
                <affiliation>
                    <orgname>MyBatis.org</orgname>
                </affiliation>
            </author>
        </authorgroup>

        <legalnotice>
            <para>Copies of this document may be made for your own use
                and for
                distribution to others, provided that you do not charge any fee for such
                copies and further provided that each copy contains this Copyright
                Notice, whether distributed in print or electronically.
            </para>
        </legalnotice>
    </bookinfo>

    <chapter>
        <title>The MyBatis OScache integration</title>
        <section>
            <title>How to</title>
            <para><ulink url="http://www.opensymphony.com/oscache/">OSCache</ulink> is a high performances caching solution developed and maintained by
            <ulink url="http://www.opensymphony.com/">Open Symphony</ulink> and easily integrated in
            MyBatis since the iBATIS version 2.X.</para>
            <para>Since MyBatis 3 comes without it, and we strongly use it, we decided to
            reintroduce his use.</para>
            <para>Users that want to use OScache into their applications, have to download the <?eval ${project.version}?> zip
            <ulink url="http://code.google.com/p/mybatis/downloads/list?q=Product-Cache">bundle</ulink>, decompress it and add the jars in the classpath;
            Apache Maven users instead can simply add in
            the <literal>pom.xml</literal> the following dependency:</para>
            <programlisting language="xml"><![CDATA[<dependencies>
    ...
    <dependency>
        <groupId>]]><?eval ${project.groupId}?><![CDATA[</groupId>
        <artifactId>]]><?eval ${project.artifactId}?><![CDATA[</artifactId>
        <version>]]><?eval ${project.version}?><![CDATA[</version>
    </dependency>
    ...
</dependencies>]]></programlisting>
            <para>then, just configure it in the mapper XML</para>
            <programlisting language="xml"><![CDATA[<mapper namespace="org.acme.FooMapper">

    <cache type="]]><?eval ${project.groupId}?><![CDATA[.oscache.OSCache"/>

    ...

</mapper>]]></programlisting>
            <para>If users need to log cache operations, they can plug the Cache logging version:</para>
            <programlisting language="xml"><![CDATA[<mapper namespace="org.acme.FooMapper">

    <cache type="]]><?eval ${project.groupId}?><![CDATA[.oscache.LoggingOSCache"/>

    ...

</mapper>]]></programlisting>
            <para>For proper OSCache configuration please read the offical
  <ulink url="http://wiki.opensymphony.com/display/CACHE/Configuration">reference</ulink>.</para>
        </section>
    </chapter>

</book>
